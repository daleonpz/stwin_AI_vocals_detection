Neural Network Tools for STM32AI v1.6.0 (STM.ai v7.1.0-RC3)
Created date          : 2023-01-16 21:43:38
Parameters            : generate -m results/model.onnx --type onnx -o ../deployment/X-CUBE-AI/App --name model

Exec/report summary (generate)
------------------------------------------------------------------------------------------------------------------------
model file            : /home/me/Documents/git/mystuff/tinyml/stwin_AI_vowel_detection/trainer/results/model.onnx
type                  : onnx
c_name                : model
compression           : lossless
workspace dir         : /home/me/Documents/git/mystuff/tinyml/stwin_AI_vowel_detection/trainer/stm32ai_ws
output dir            : /home/me/Documents/git/mystuff/tinyml/stwin_AI_vowel_detection/deployment/X-CUBE-AI/App
model_name            : model
model_hash            : 9753aca2e3815a75aa643a4d6cd5977d
input 1/1             : 'input'
                        2400 items, 9.38 KiB, ai_float, float, (1,6,20,20), domain:user/
output 1/1            : 'output'
                        5 items, 20 B, ai_float, float, (1,1,1,5), domain:user/
params #              : 22,673 items (88.57 KiB)
macc                  : 552,340
weights (ro)          : 90,692 B (88.57 KiB) (1 segment)
activations (rw)      : 12,624 B (12.33 KiB) (1 segment)
ram (total)           : 22,244 B (21.72 KiB) = 12,624 + 9,600 + 20

Model name - model ['input'] ['output']
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
id   layer (type)                       oshape         param/size      macc      connected to         |   c_size             c_macc            c_type               
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
7    fc_layers_0_weight (Placeholder)   (1,600,1,32)   19,200/76,800                                  |   -76,800(-100.0%)                    
     fc_layers_0_bias (Placeholder)     (1,1,1,32)     32/128                                         |   -128(-100.0%)                       
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
9    fc_layers_2_weight (Placeholder)   (1,32,1,5)     160/640                                        |   -640(-100.0%)                       
     fc_layers_2_bias (Placeholder)     (1,1,1,5)      5/20                                           |   -20(-100.0%)                        
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
0    input (Input)                      (1,20,20,6)                                                   |                                        transpose()[0]       
     node_9 (Conv2D)                    (1,20,20,12)   660/2,640       259,212   input                |                      +9,600(+3.7%)     optimized_conv2d()[1]
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
1    node_10 (Nonlinearity)             (1,20,20,12)                   4,800     node_9               |                      -4,800(-100.0%)  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
2    node_11 (Pool)                     (1,10,10,12)                   4,800     node_10              |                      -4,800(-100.0%)  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
3    node_12 (Conv2D)                   (1,10,10,24)   2,616/10,464    259,224   node_11              |                      +4,800(+1.9%)     optimized_conv2d()[2]
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
4    node_13 (Nonlinearity)             (1,10,10,24)                   2,400     node_12              |                      -2,400(-100.0%)  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
5    node_14 (Pool)                     (1,5,5,24)                     2,400     node_13              |                      -2,400(-100.0%)  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
6    node_20 (Reshape)                  (1,1,1,600)                              node_14              |                                       
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
7    node_21 (Gemm)                     (1,1,1,32)                     19,232    node_20              |   +76,928(+100.0%)                     gemm()[3]            
                                                                                 fc_layers_0_weight   |  
                                                                                 fc_layers_0_bias     |  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
8    node_22 (Nonlinearity)             (1,1,1,32)                     32        node_21              |                                        nl()[4]              
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
9    node_23 (Gemm)                     (1,1,1,5)                      165       node_22              |   +660(+100.0%)                        gemm()[5]            
                                                                                 fc_layers_2_weight   |  
                                                                                 fc_layers_2_bias     |  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
10   output (Nonlinearity)              (1,1,1,5)                      75        node_23              |                                        nl()/o[6]            
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
model/c-model: macc=552,340/552,340  weights=90,692/90,692  activations=--/12,624 io=--/9,620



Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name            : model
c-name                : model
c-node #              : 7
c-array #             : 18
activations size      : 12624 (1 segments)
weights size          : 90692 (1 segments)
macc                  : 552340
inputs                : ['input_output']
outputs               : ['output_output']

C-Arrays (18)
------------------------------------------------------------------------------------------------------
c_id   name (*_array)           item/size     domain/mem-pool           c-type        fmt     comment
------------------------------------------------------------------------------------------------------
0      input_output             2400/9600     user/                     float         float   /input 
1      input_Transpose_output   2400/9600     activations/**default**   float         float          
2      node_9_output            1200/4800     activations/**default**   float         float          
3      node_12_output           600/2400      activations/**default**   float         float          
4      node_21_output           32/128        activations/**default**   float         float          
5      node_22_output           32/128        activations/**default**   float         float          
6      node_23_output           5/20          activations/**default**   float         float          
7      output_output            5/20          user/                     float         float   /output
8      node_9_weights           648/2592      weights/                  const float   float          
9      node_9_bias              12/48         weights/                  const float   float          
10     node_12_weights          2592/10368    weights/                  const float   float          
11     node_12_bias             24/96         weights/                  const float   float          
12     fc_layers_2_bias         5/20          weights/                  const float   float          
13     fc_layers_2_weight       160/640       weights/                  const float   float          
14     fc_layers_0_bias         32/128        weights/                  const float   float          
15     fc_layers_0_weight       19200/76800   weights/                  const float   float          
16     node_9_scratch0          480/1920      activations/**default**   float         float          
17     node_12_scratch0         480/1920      activations/**default**   float         float          
------------------------------------------------------------------------------------------------------

C-Layers (7)
----------------------------------------------------------------------------------------------------------------
c_id   name (*_layer)    id   layer_type         macc     rom     tensors                     shape (array id) 
----------------------------------------------------------------------------------------------------------------
0      input_Transpose   2    transpose          0        0       I: input_output             (1,6,20,20) (0)  
                                                                  O: input_Transpose_output   (1,20,20,6) (1)  
----------------------------------------------------------------------------------------------------------------
1      node_9            2    optimized_conv2d   268812   2640    I: input_Transpose_output   (1,20,20,6) (1)  
                                                                  S: node_9_scratch0                           
                                                                  W: node_9_weights           (6,12,3,3) (8)   
                                                                  W: node_9_bias              (1,1,1,12) (9)   
                                                                  O: node_9_output            (1,10,10,12) (2) 
----------------------------------------------------------------------------------------------------------------
2      node_12           5    optimized_conv2d   264024   10464   I: node_9_output            (1,10,10,12) (2) 
                                                                  S: node_12_scratch0                          
                                                                  W: node_12_weights          (12,24,3,3) (10) 
                                                                  W: node_12_bias             (1,1,1,24) (11)  
                                                                  O: node_12_output           (1,5,5,24) (3)   
----------------------------------------------------------------------------------------------------------------
3      node_21           7    gemm               19232    76928   I: node_12_output0          (1,1,1,600) (3)  
                                                                  I: fc_layers_0_weight       (1,32,1,600) (15)
                                                                  I: fc_layers_0_bias         (1,1,1,32) (14)  
                                                                  O: node_21_output           (1,1,1,32) (4)   
----------------------------------------------------------------------------------------------------------------
4      node_22           8    nl                 32       0       I: node_21_output           (1,1,1,32) (4)   
                                                                  O: node_22_output           (1,1,1,32) (5)   
----------------------------------------------------------------------------------------------------------------
5      node_23           9    gemm               165      660     I: node_22_output           (1,1,1,32) (5)   
                                                                  I: fc_layers_2_weight       (1,5,1,32) (13)  
                                                                  I: fc_layers_2_bias         (1,1,1,5) (12)   
                                                                  O: node_23_output           (1,1,1,5) (6)    
----------------------------------------------------------------------------------------------------------------
6      output            10   nl                 75       0       I: node_23_output           (1,1,1,5) (6)    
                                                                  O: output_output            (1,1,1,5) (7)    
----------------------------------------------------------------------------------------------------------------



Complexity report per layer - macc=552,340 weights=90,692 act=12,624 ram_io=9,620
------------------------------------------------------------------------
id   name      c_macc                    c_rom                     c_id
------------------------------------------------------------------------
0    input     |                  0.0%   |                  0.0%   [0] 
0    node_9    ||||||||||||||||  48.7%   |                  2.9%   [1] 
3    node_12   |||||||||||||||   47.8%   |||               11.5%   [2] 
7    node_21   ||                 3.5%   ||||||||||||||||  84.8%   [3] 
8    node_22   |                  0.0%   |                  0.0%   [4] 
9    node_23   |                  0.0%   |                  0.7%   [5] 
10   output    |                  0.0%   |                  0.0%   [6] 

Generated files (5)
----------------------------------------------------------------------------------------------------------------
/home/me/Documents/git/mystuff/tinyml/stwin_AI_vowel_detection/deployment/X-CUBE-AI/App/model_config.h
/home/me/Documents/git/mystuff/tinyml/stwin_AI_vowel_detection/deployment/X-CUBE-AI/App/model.h
/home/me/Documents/git/mystuff/tinyml/stwin_AI_vowel_detection/deployment/X-CUBE-AI/App/model.c
/home/me/Documents/git/mystuff/tinyml/stwin_AI_vowel_detection/deployment/X-CUBE-AI/App/model_data.h
/home/me/Documents/git/mystuff/tinyml/stwin_AI_vowel_detection/deployment/X-CUBE-AI/App/model_data.c
